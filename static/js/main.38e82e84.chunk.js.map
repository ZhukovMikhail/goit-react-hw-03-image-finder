{"version":3,"sources":["Components/Searchbar/SearchBar.jsx","Components/ImageGalleryItem/ImageGalleryItem.jsx","Components/ImageGallery/ImageGallery.jsx","Components/Modal/Modal.jsx","Components/Button/Button.jsx","App.js","index.js"],"names":["SearchBar","state","searchQuerry","onSearchFormChange","e","setState","currentTarget","value","onSubmitForm","preventDefault","trim","props","onSubmit","toast","warn","className","this","type","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","images","perPage","pageNumber","totalHits","loading","error","imgLength","pageDown","window","scrollTo","top","document","documentElement","scrollHeight","behavior","prevProps","prevState","querry","page","fetch","then","r","json","hits","length","console","log","catch","finally","map","image","onClick","src","webformatURL","largeImageURL","alt","tags","id","ImageGallery","modalRoot","querySelector","Modal","idEscapeEvent","code","onToggleModal","onBackdropClick","target","addEventListener","removeEventListener","createPortal","children","Button","onLoadMore","App","showModal","largeImg","toggleModal","onImageClick","dir","dataset","onSearchSubmit","prev","onLoading","onError","color","height","width","position","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.38e82e84.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport { toast } from 'react-toastify';\r\nclass SearchBar extends Component {\r\n  state = {\r\n    searchQuerry: '',\r\n  };\r\n  onSearchFormChange = e => {\r\n    this.setState({ searchQuerry: e.currentTarget.value });\r\n  };\r\n  onSubmitForm = e => {\r\n    e.preventDefault();\r\n    if (this.state.searchQuerry.trim() === '') {\r\n      toast.warn('No data entered');\r\n      return;\r\n    }\r\n    this.props.onSubmit(this.state.searchQuerry);\r\n    this.setState({ searchQuerry: '' });\r\n  };\r\n  render() {\r\n    return (\r\n      <header className=\"Searchbar\">\r\n        <form className=\"SearchForm\" onSubmit={this.onSubmitForm}>\r\n          <button type=\"submit\" className=\"SearchForm-button\">\r\n            <span className=\"SearchForm-button-label\">Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className=\"SearchForm-input\"\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            onChange={this.onSearchFormChange}\r\n            value={this.state.searchQuerry}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\nexport default SearchBar;\r\n","import React, { Component } from 'react';\r\n\r\nexport default class ImageGalleryItem extends Component {\r\n  state = {\r\n    images: [],\r\n    perPage: 12,\r\n    pageNumber: 1,\r\n    totalHits: null,\r\n    loading: false,\r\n    error: false,\r\n    imgLength: null,\r\n  };\r\n  pageDown = () => {\r\n    window.scrollTo({\r\n      top: document.documentElement.scrollHeight,\r\n      behavior: 'smooth',\r\n    });\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (\r\n      prevProps.querry !== this.props.querry ||\r\n      prevState.pageNumber !== this.props.page\r\n    ) {\r\n      if (this.props.page === 1) {\r\n        prevState.images = [];\r\n      }\r\n      this.setState({\r\n        pageNumber: this.props.page,\r\n      });\r\n\r\n      this.setState({ loading: true, error: false });\r\n      this.props.loading(this.state.loading);\r\n\r\n      const USER_KEY = '22985243-b477986a48324befacd1d8a65';\r\n      fetch(\r\n        `https://pixabay.com/api/?q=${this.props.querry}&page=${this.state.pageNumber}&key=${USER_KEY}&image_type=photo&orientation=horizontal&per_page=${this.state.perPage}`,\r\n      )\r\n        .then(r => r.json())\r\n        .then(r => {\r\n          this.setState({\r\n            images: [...prevState.images, ...r.hits],\r\n            totalHits: r.totalHits,\r\n            imgLength: [...prevState.images, ...r.hits].length,\r\n          });\r\n          console.log(r);\r\n          console.log(this.state.totalHits);\r\n          this.props.totalHits(this.state.totalHits, this.state.imgLength);\r\n          if (this.state.pageNumber !== 1) {\r\n            this.pageDown();\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n          this.setState({\r\n            images: [],\r\n            totalHits: null,\r\n            error: true,\r\n            imgLength: null,\r\n          });\r\n          this.props.totalHits(this.state.totalHits);\r\n        })\r\n        .finally(() => {\r\n          this.setState({ loading: false });\r\n          this.props.loading(this.state.loading);\r\n        });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return !this.state.error ? (\r\n      this.state.totalHits !== 0 ? (\r\n        this.state.images.map(image => (\r\n          <li className=\"ImageGalleryItem\" key={image.id}>\r\n            <img\r\n              onClick={this.props.onClick}\r\n              src={image.webformatURL}\r\n              data-src={image.largeImageURL}\r\n              alt={image.tags}\r\n              className=\"ImageGalleryItem-image\"\r\n            />\r\n          </li>\r\n        ))\r\n      ) : (\r\n        <h2 className=\"title\"> No match found ...</h2>\r\n      )\r\n    ) : (\r\n      <h2 className=\"title\"> Something goes wrong ... </h2>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\r\n\r\nexport default class ImageGallery extends Component {\r\n  render() {\r\n    return (\r\n      <ul className=\"ImageGallery\">\r\n        <ImageGalleryItem\r\n          querry={this.props.querry}\r\n          page={this.props.page}\r\n          totalHits={this.props.totalHits}\r\n          onClick={this.props.onClick}\r\n          loading={this.props.loading}\r\n        />\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\n// import styles from './Modal.module.css';\r\n// import ContactForm from '../ContactForm/ContactForm.jsx';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nexport default class Modal extends Component {\r\n  componentDidMount() {\r\n    console.log('Modal componentDidMount');\r\n    window.addEventListener('keydown', this.idEscapeEvent);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.idEscapeEvent);\r\n  }\r\n\r\n  idEscapeEvent = e => {\r\n    if (e.code === 'Escape') {\r\n      this.props.onToggleModal();\r\n    }\r\n  };\r\n\r\n  onBackdropClick = e => {\r\n    if (e.currentTarget === e.target) {\r\n      this.props.onToggleModal();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return createPortal(\r\n      <div className=\"Overlay\" onClick={this.onBackdropClick}>\r\n        <div className=\"Modal\">{this.props.children}</div>\r\n      </div>,\r\n      modalRoot,\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nexport default class Button extends Component {\r\n  render() {\r\n    return (\r\n      <button className=\"Button\" onClick={this.props.onLoadMore}>\r\n        Load more\r\n      </button>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\nimport './App.css';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport SearchBar from './Components/Searchbar/SearchBar.jsx';\nimport ImageGallery from './Components/ImageGallery/ImageGallery.jsx';\nimport Modal from './Components/Modal/Modal';\nimport Button from './Components/Button/Button.jsx';\nimport Loader from 'react-loader-spinner';\n\nclass App extends Component {\n  state = {\n    querry: '',\n    showModal: false,\n    largeImg: null,\n    totalHits: null,\n    page: 1,\n    loading: false,\n    imgLength: null,\n  };\n\n  toggleModal = () => {\n    this.setState(state => ({\n      showModal: !state.showModal,\n    }));\n  };\n\n  onImageClick = e => {\n    if ((e.target = 'IMG')) {\n      this.toggleModal();\n    }\n    console.dir(e.currentTarget.dataset.src);\n    this.setState({ largeImg: e.currentTarget.dataset.src });\n  };\n\n  onSearchSubmit = querry => {\n    console.log(querry);\n    this.setState({\n      querry: querry,\n      page: 1,\n    });\n  };\n  totalHits = (totalHits, imgLength) => {\n    totalHits === 0\n      ? this.setState({\n          totalHits: null,\n        })\n      : this.setState({\n          totalHits: totalHits,\n          imgLength: imgLength,\n        });\n  };\n\n  onLoadMore = () => {\n    console.log('кликнули на onLoadMore');\n    this.setState(prev => ({\n      page: prev.page + 1,\n    }));\n  };\n  onLoading = () => {\n    this.setState({ loading: !this.state.loading });\n  };\n  onError = () => {\n    this.setState({});\n  };\n\n  render() {\n    return (\n      <div className=\"section\">\n        <SearchBar onSubmit={this.onSearchSubmit} />\n        {this.state.loading && (\n          <Loader\n            type=\"Bars\"\n            className=\"spinner\"\n            color=\"#00BFFF\"\n            height={50}\n            width={50}\n          />\n        )}\n        <ImageGallery\n          querry={this.state.querry}\n          page={this.state.page}\n          totalHits={this.totalHits}\n          onClick={this.onImageClick}\n          loading={this.onLoading}\n        />\n\n        {\n          (this.state.totalHits > 12,\n          this.state.totalHits > this.state.imgLength && (\n            <Button onLoadMore={this.onLoadMore} />\n          ))\n        }\n        {this.state.showModal && (\n          <Modal onToggleModal={this.toggleModal}>\n            <img src={this.state.largeImg} alt={this.state.querry} />\n            <button\n              className=\"closeBtn\"\n              type=\"button\"\n              onClick={this.toggleModal}\n            >\n              X\n            </button>\n          </Modal>\n        )}\n        <ToastContainer position=\"top-center\" autoClose={1000} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}