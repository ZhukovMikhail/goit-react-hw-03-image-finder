(this["webpackJsonpgoit-react-hw-03-phonebook"]=this["webpackJsonpgoit-react-hw-03-phonebook"]||[]).push([[0],{13:function(t,e,o){},14:function(t,e,o){},17:function(t,e,o){"use strict";o.r(e);var a=o(0),n=o.n(a),r=o(6),c=o.n(r),s=(o(13),o(2)),i=o(3),l=o(5),u=o(4),h=(o(14),o(7)),p=(o(15),o(1)),d=function(t){Object(l.a)(o,t);var e=Object(u.a)(o);function o(){var t;Object(s.a)(this,o);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))).state={searchQuerry:""},t.onSearchFormChange=function(e){t.setState({searchQuerry:e.currentTarget.value})},t.onSubmitForm=function(e){e.preventDefault(),""!==t.state.searchQuerry.trim()?t.props.onSubmit(t.state.searchQuerry):h.b.warn("No data entered")},t}return Object(i.a)(o,[{key:"render",value:function(){return Object(p.jsx)("header",{className:"Searchbar",children:Object(p.jsxs)("form",{className:"SearchForm",onSubmit:this.onSubmitForm,children:[Object(p.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(p.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(p.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:this.onSearchFormChange})]})})}}]),o}(a.Component),g=d,m=function(t){Object(l.a)(o,t);var e=Object(u.a)(o);function o(){var t;Object(s.a)(this,o);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))).state={querry:[],perPage:12,pageNumber:1,totalHits:null},t}return Object(i.a)(o,[{key:"componentDidUpdate",value:function(t,e){var o=this;if(t.querry!==this.props.querry||e.pageNumber!==this.props.onLoadMore){console.log("change querry"),console.log("Prev querry",t.querry),console.log("text of querry",this.props.querry);fetch("https://pixabay.com/api/?q=".concat(this.props.querry,"&page=").concat(this.state.pageNumber,"&key=").concat("22985243-b477986a48324befacd1d8a65","&image_type=photo&orientation=horizontal&per_page=").concat(this.state.perPage)).then((function(t){return t.json()})).then((function(t){o.setState({querry:t.hits,totalHits:t.totalHits}),console.log(t),console.log(o.state.totalHits),o.props.totalHits(o.state.totalHits)}))}this.props.onLoadMore!==this.state.pageNumber&&this.setState((function(t){return{perPage:t.perPage+12<o.state.totalHits?t.perPage+12:o.state.totalHits,pageNumber:t.pageNumber+1}})),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}},{key:"render",value:function(){var t=this;return this.state.querry.map((function(e){return Object(p.jsx)("li",{className:"ImageGalleryItem",children:Object(p.jsx)("img",{onClick:t.props.onClick,src:e.webformatURL,"data-src":e.largeImageURL,alt:e.tags,className:"ImageGalleryItem-image"})},e.id)}))}}]),o}(a.Component),b=function(t){Object(l.a)(o,t);var e=Object(u.a)(o);function o(){return Object(s.a)(this,o),e.apply(this,arguments)}return Object(i.a)(o,[{key:"render",value:function(){return Object(p.jsx)("ul",{className:"ImageGallery",children:Object(p.jsx)(m,{querry:this.props.querry,onClick:this.props.onImageClick,totalHits:this.props.totalHits,onResponceLength:this.props.onResponceLength,onLoadMore:this.props.onLoadMore})})}}]),o}(a.Component),j=document.querySelector("#modal-root"),y=function(t){Object(l.a)(o,t);var e=Object(u.a)(o);function o(){var t;Object(s.a)(this,o);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))).idEscapeEvent=function(e){"Escape"===e.code&&t.props.onToggleModal()},t.onBackdropClick=function(e){e.currentTarget===e.target&&t.props.onToggleModal()},t}return Object(i.a)(o,[{key:"componentDidMount",value:function(){console.log("Modal componentDidMount"),window.addEventListener("keydown",this.idEscapeEvent)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.idEscapeEvent)}},{key:"render",value:function(){return Object(r.createPortal)(Object(p.jsx)("div",{className:"Overlay",onClick:this.onBackdropClick,children:Object(p.jsx)("div",{className:"Modal",children:this.props.children})}),j)}}]),o}(a.Component),f=function(t){Object(l.a)(o,t);var e=Object(u.a)(o);function o(){return Object(s.a)(this,o),e.apply(this,arguments)}return Object(i.a)(o,[{key:"render",value:function(){return Object(p.jsx)("button",{className:"Button",onClick:this.props.onLoadMore,children:"Load more"})}}]),o}(a.Component),O=function(t){Object(l.a)(o,t);var e=Object(u.a)(o);function o(){var t;Object(s.a)(this,o);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))).state={querry:"",showModal:!1,largeImg:null,totalHits:null,page:1},t.toggleModal=function(){t.setState((function(t){return{showModal:!t.showModal}}))},t.onImageClick=function(e){(e.target="IMG")&&t.toggleModal(),console.dir(e.currentTarget.dataset.src),t.setState({largeImg:e.currentTarget.dataset.src})},t.onSearchSubmit=function(e){console.log(e),t.setState({querry:e})},t.totalHits=function(e){t.setState({totalHits:e})},t.onLoadMore=function(){console.log("\u043a\u043b\u0438\u043a\u043d\u0443\u043b\u0438 \u043d\u0430 onLoadMore"),t.setState((function(t){return{page:t.page+1}}))},t}return Object(i.a)(o,[{key:"render",value:function(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"section",children:[Object(p.jsx)(g,{onSubmit:this.onSearchSubmit}),Object(p.jsx)(b,{totalHits:this.totalHits,querry:this.state.querry,onImageClick:this.onImageClick,onLoadMore:this.state.page}),this.state.totalHits&&Object(p.jsx)(f,{onLoadMore:this.onLoadMore}),this.state.showModal&&Object(p.jsxs)(y,{onToggleModal:this.toggleModal,children:[Object(p.jsx)("img",{src:this.state.largeImg,alt:this.state.querry}),Object(p.jsx)("button",{className:"closeBtn",type:"button",onClick:this.toggleModal,children:"X"})]}),Object(p.jsx)(h.a,{position:"top-center",autoClose:1e3})]})})}}]),o}(a.Component),v=O;c.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(v,{})}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.49f47a9b.chunk.js.map