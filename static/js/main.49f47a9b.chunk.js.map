{"version":3,"sources":["Components/Searchbar/SearchBar.jsx","Components/ImageGalleryItem/ImageGalleryItem.jsx","Components/ImageGallery/ImageGallery.jsx","Components/Modal/Modal.jsx","Components/Button/Button.jsx","App.js","index.js"],"names":["SearchBar","state","searchQuerry","onSearchFormChange","e","setState","currentTarget","value","onSubmitForm","preventDefault","trim","props","onSubmit","toast","warn","className","this","type","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","querry","perPage","pageNumber","totalHits","prevProps","prevState","onLoadMore","console","log","fetch","then","r","json","hits","prev","window","scrollTo","top","document","documentElement","scrollHeight","behavior","map","q","onClick","src","webformatURL","largeImageURL","alt","tags","id","ImageGallery","onImageClick","onResponceLength","modalRoot","querySelector","Modal","idEscapeEvent","code","onToggleModal","onBackdropClick","target","addEventListener","removeEventListener","createPortal","children","Button","App","showModal","largeImg","page","toggleModal","dir","dataset","onSearchSubmit","position","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.49f47a9b.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport { toast } from 'react-toastify';\r\nclass SearchBar extends Component {\r\n  state = {\r\n    searchQuerry: '',\r\n  };\r\n  onSearchFormChange = e => {\r\n    this.setState({ searchQuerry: e.currentTarget.value });\r\n  };\r\n  onSubmitForm = e => {\r\n    e.preventDefault();\r\n    if (this.state.searchQuerry.trim() === '') {\r\n      toast.warn('No data entered');\r\n      return;\r\n    }\r\n    this.props.onSubmit(this.state.searchQuerry);\r\n  };\r\n  render() {\r\n    return (\r\n      <header className=\"Searchbar\">\r\n        <form className=\"SearchForm\" onSubmit={this.onSubmitForm}>\r\n          <button type=\"submit\" className=\"SearchForm-button\">\r\n            <span className=\"SearchForm-button-label\">Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className=\"SearchForm-input\"\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            onChange={this.onSearchFormChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\nexport default SearchBar;\r\n","import React, { Component } from 'react';\r\n\r\nexport default class ImageGalleryItem extends Component {\r\n  state = {\r\n    querry: [],\r\n    perPage: 12,\r\n    pageNumber: 1,\r\n    totalHits: null,\r\n  };\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (\r\n      prevProps.querry !== this.props.querry ||\r\n      prevState.pageNumber !== this.props.onLoadMore\r\n    ) {\r\n      console.log('change querry');\r\n      console.log('Prev querry', prevProps.querry);\r\n      console.log('text of querry', this.props.querry);\r\n      const USER_KEY = '22985243-b477986a48324befacd1d8a65';\r\n      fetch(\r\n        `https://pixabay.com/api/?q=${this.props.querry}&page=${this.state.pageNumber}&key=${USER_KEY}&image_type=photo&orientation=horizontal&per_page=${this.state.perPage}`,\r\n      )\r\n        .then(r => r.json())\r\n        .then(r => {\r\n          this.setState({\r\n            querry: r.hits,\r\n            totalHits: r.totalHits,\r\n          });\r\n          console.log(r);\r\n          console.log(this.state.totalHits);\r\n          this.props.totalHits(this.state.totalHits);\r\n        });\r\n    }\r\n    if (this.props.onLoadMore !== this.state.pageNumber) {\r\n      this.setState(prev => ({\r\n        perPage:\r\n          prev.perPage + 12 < this.state.totalHits\r\n            ? prev.perPage + 12\r\n            : this.state.totalHits,\r\n        pageNumber: prev.pageNumber + 1,\r\n      }));\r\n    }\r\n    window.scrollTo({\r\n      top: document.documentElement.scrollHeight,\r\n      behavior: 'smooth',\r\n    });\r\n  }\r\n  render() {\r\n    return this.state.querry.map(q => (\r\n      <li className=\"ImageGalleryItem\" key={q.id}>\r\n        <img\r\n          onClick={this.props.onClick}\r\n          src={q.webformatURL}\r\n          data-src={q.largeImageURL}\r\n          alt={q.tags}\r\n          className=\"ImageGalleryItem-image\"\r\n        />\r\n      </li>\r\n    ));\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\r\n\r\nexport default class ImageGallery extends Component {\r\n  render() {\r\n    return (\r\n      <ul className=\"ImageGallery\">\r\n        <ImageGalleryItem\r\n          querry={this.props.querry}\r\n          onClick={this.props.onImageClick}\r\n          totalHits={this.props.totalHits}\r\n          onResponceLength={this.props.onResponceLength}\r\n          onLoadMore={this.props.onLoadMore}\r\n        />\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\n// import styles from './Modal.module.css';\r\n// import ContactForm from '../ContactForm/ContactForm.jsx';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nexport default class Modal extends Component {\r\n  componentDidMount() {\r\n    console.log('Modal componentDidMount');\r\n    window.addEventListener('keydown', this.idEscapeEvent);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.idEscapeEvent);\r\n  }\r\n\r\n  idEscapeEvent = e => {\r\n    if (e.code === 'Escape') {\r\n      this.props.onToggleModal();\r\n    }\r\n  };\r\n\r\n  onBackdropClick = e => {\r\n    if (e.currentTarget === e.target) {\r\n      this.props.onToggleModal();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return createPortal(\r\n      <div className=\"Overlay\" onClick={this.onBackdropClick}>\r\n        <div className=\"Modal\">{this.props.children}</div>\r\n      </div>,\r\n      modalRoot,\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nexport default class Button extends Component {\r\n  render() {\r\n    return (\r\n      <button className=\"Button\" onClick={this.props.onLoadMore}>\r\n        Load more\r\n      </button>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\nimport './App.css';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport SearchBar from './Components/Searchbar/SearchBar.jsx';\nimport ImageGallery from './Components/ImageGallery/ImageGallery.jsx';\nimport Modal from './Components/Modal/Modal';\nimport Button from './Components/Button/Button.jsx';\n\nclass App extends Component {\n  state = {\n    querry: '',\n    showModal: false,\n    largeImg: null,\n    totalHits: null,\n    page: 1,\n  };\n\n  toggleModal = () => {\n    this.setState(state => ({\n      showModal: !state.showModal,\n    }));\n  };\n  onImageClick = e => {\n    if ((e.target = 'IMG')) {\n      this.toggleModal();\n    }\n    console.dir(e.currentTarget.dataset.src);\n    this.setState({ largeImg: e.currentTarget.dataset.src });\n  };\n\n  onSearchSubmit = querry => {\n    console.log(querry);\n    this.setState({\n      querry: querry,\n    });\n  };\n  totalHits = totalHits => {\n    this.setState({\n      totalHits: totalHits,\n    });\n  };\n\n  onLoadMore = () => {\n    console.log('кликнули на onLoadMore');\n    this.setState(prev => ({\n      page: prev.page + 1,\n    }));\n  };\n\n  render() {\n    return (\n      <>\n        <div className=\"section\">\n          <SearchBar onSubmit={this.onSearchSubmit} />\n          <ImageGallery\n            totalHits={this.totalHits}\n            querry={this.state.querry}\n            onImageClick={this.onImageClick}\n            onLoadMore={this.state.page}\n          />\n          {this.state.totalHits && <Button onLoadMore={this.onLoadMore} />}\n          {this.state.showModal && (\n            <Modal onToggleModal={this.toggleModal}>\n              <img src={this.state.largeImg} alt={this.state.querry} />\n              <button\n                className=\"closeBtn\"\n                type=\"button\"\n                onClick={this.toggleModal}\n              >\n                X\n              </button>\n            </Modal>\n          )}\n\n          <ToastContainer position=\"top-center\" autoClose={1000} />\n        </div>\n      </>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}