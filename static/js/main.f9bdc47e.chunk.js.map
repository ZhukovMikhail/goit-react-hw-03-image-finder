{"version":3,"sources":["Components/Searchbar/SearchBar.jsx","Components/ImageGalleryItem/ImageGalleryItem.jsx","Components/ImageGallery/ImageGallery.jsx","Components/Modal/Modal.jsx","Components/Button/Button.jsx","App.js","index.js"],"names":["SearchBar","state","searchQuerry","onSearchFormChange","e","setState","currentTarget","value","onSubmitForm","preventDefault","trim","props","onSubmit","toast","warn","className","this","type","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","images","perPage","pageNumber","totalHits","loading","error","imgLength","prevProps","prevState","querry","page","fetch","then","r","json","hits","length","console","log","catch","finally","window","scrollTo","top","document","documentElement","scrollHeight","behavior","map","image","onClick","src","webformatURL","largeImageURL","alt","tags","id","ImageGallery","modalRoot","querySelector","Modal","idEscapeEvent","code","onToggleModal","onBackdropClick","target","addEventListener","removeEventListener","createPortal","children","Button","onLoadMore","App","showModal","largeImg","toggleModal","onImageClick","dir","dataset","onSearchSubmit","prev","onLoading","onError","color","height","width","position","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.f9bdc47e.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport { toast } from 'react-toastify';\r\nclass SearchBar extends Component {\r\n  state = {\r\n    searchQuerry: '',\r\n  };\r\n  onSearchFormChange = e => {\r\n    this.setState({ searchQuerry: e.currentTarget.value });\r\n  };\r\n  onSubmitForm = e => {\r\n    e.preventDefault();\r\n    if (this.state.searchQuerry.trim() === '') {\r\n      toast.warn('No data entered');\r\n      return;\r\n    }\r\n    this.props.onSubmit(this.state.searchQuerry);\r\n    this.setState({ searchQuerry: '' });\r\n  };\r\n  render() {\r\n    return (\r\n      <header className=\"Searchbar\">\r\n        <form className=\"SearchForm\" onSubmit={this.onSubmitForm}>\r\n          <button type=\"submit\" className=\"SearchForm-button\">\r\n            <span className=\"SearchForm-button-label\">Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className=\"SearchForm-input\"\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            onChange={this.onSearchFormChange}\r\n            value={this.state.searchQuerry}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\nexport default SearchBar;\r\n","import React, { Component } from 'react';\r\n\r\nexport default class ImageGalleryItem extends Component {\r\n  state = {\r\n    images: [],\r\n    perPage: 12,\r\n    pageNumber: 1,\r\n    totalHits: null,\r\n    loading: false,\r\n    error: false,\r\n    imgLength: null,\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (\r\n      prevProps.querry !== this.props.querry ||\r\n      prevState.pageNumber !== this.props.page\r\n    ) {\r\n      if (this.props.page === 1) {\r\n        prevState.images = [];\r\n      }\r\n      this.setState(prevState => ({\r\n        // perPage: prevState.perPage + 12,\r\n        pageNumber: this.props.page,\r\n      }));\r\n      this.setState({ loading: true, error: false });\r\n      this.props.loading(this.state.loading);\r\n\r\n      // console.log('change querry');\r\n      // console.log('Prev querry', prevProps.querry);\r\n      // console.log('text of querry', this.props.querry);\r\n\r\n      const USER_KEY = '22985243-b477986a48324befacd1d8a65';\r\n      fetch(\r\n        `https://pixabay.com/api/?q=${this.props.querry}&page=${this.state.pageNumber}&key=${USER_KEY}&image_type=photo&orientation=horizontal&per_page=${this.state.perPage}`,\r\n      )\r\n        .then(r => r.json())\r\n        .then(r => {\r\n          this.setState({\r\n            images: [...prevState.images, ...r.hits],\r\n            totalHits: r.totalHits,\r\n            imgLength: [...prevState.images, ...r.hits].length,\r\n          });\r\n          console.log(r);\r\n          console.log(this.state.totalHits);\r\n          this.props.totalHits(this.state.totalHits, this.state.imgLength);\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n          this.setState({\r\n            images: [],\r\n            totalHits: null,\r\n            error: true,\r\n            imgLength: null,\r\n          });\r\n          this.props.totalHits(this.state.totalHits);\r\n        })\r\n        .finally(() => {\r\n          this.setState({ loading: false });\r\n          this.props.loading(this.state.loading);\r\n        });\r\n    }\r\n    if (this.state.pageNumber !== 1 || prevProps.querry !== this.props.querry) {\r\n      window.scrollTo({\r\n        top: document.documentElement.scrollHeight,\r\n        behavior: 'smooth',\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return !this.state.error ? (\r\n      this.state.totalHits !== 0 ? (\r\n        this.state.images.map(image => (\r\n          <li className=\"ImageGalleryItem\" key={image.id}>\r\n            <img\r\n              onClick={this.props.onClick}\r\n              src={image.webformatURL}\r\n              data-src={image.largeImageURL}\r\n              alt={image.tags}\r\n              className=\"ImageGalleryItem-image\"\r\n            />\r\n          </li>\r\n        ))\r\n      ) : (\r\n        <h2 className=\"title\"> No match found ...</h2>\r\n      )\r\n    ) : (\r\n      <h2 className=\"title\"> Something goes wrong ... </h2>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\r\n\r\nexport default class ImageGallery extends Component {\r\n  render() {\r\n    return (\r\n      <ul className=\"ImageGallery\">\r\n        <ImageGalleryItem\r\n          querry={this.props.querry}\r\n          page={this.props.page}\r\n          totalHits={this.props.totalHits}\r\n          onClick={this.props.onClick}\r\n          loading={this.props.loading}\r\n        />\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\n// import styles from './Modal.module.css';\r\n// import ContactForm from '../ContactForm/ContactForm.jsx';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nexport default class Modal extends Component {\r\n  componentDidMount() {\r\n    console.log('Modal componentDidMount');\r\n    window.addEventListener('keydown', this.idEscapeEvent);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.idEscapeEvent);\r\n  }\r\n\r\n  idEscapeEvent = e => {\r\n    if (e.code === 'Escape') {\r\n      this.props.onToggleModal();\r\n    }\r\n  };\r\n\r\n  onBackdropClick = e => {\r\n    if (e.currentTarget === e.target) {\r\n      this.props.onToggleModal();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return createPortal(\r\n      <div className=\"Overlay\" onClick={this.onBackdropClick}>\r\n        <div className=\"Modal\">{this.props.children}</div>\r\n      </div>,\r\n      modalRoot,\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nexport default class Button extends Component {\r\n  render() {\r\n    return (\r\n      <button className=\"Button\" onClick={this.props.onLoadMore}>\r\n        Load more\r\n      </button>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\nimport './App.css';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport SearchBar from './Components/Searchbar/SearchBar.jsx';\nimport ImageGallery from './Components/ImageGallery/ImageGallery.jsx';\nimport Modal from './Components/Modal/Modal';\nimport Button from './Components/Button/Button.jsx';\nimport Loader from 'react-loader-spinner';\n\nclass App extends Component {\n  state = {\n    querry: '',\n    showModal: false,\n    largeImg: null,\n    totalHits: null,\n    page: 1,\n    loading: false,\n    imgLength: null,\n  };\n\n  toggleModal = () => {\n    this.setState(state => ({\n      showModal: !state.showModal,\n    }));\n  };\n\n  onImageClick = e => {\n    if ((e.target = 'IMG')) {\n      this.toggleModal();\n    }\n    console.dir(e.currentTarget.dataset.src);\n    this.setState({ largeImg: e.currentTarget.dataset.src });\n  };\n\n  onSearchSubmit = querry => {\n    console.log(querry);\n    this.setState({\n      querry: querry,\n      page: 1,\n    });\n  };\n  totalHits = (totalHits, imgLength) => {\n    totalHits === 0\n      ? this.setState({\n          totalHits: null,\n        })\n      : this.setState({\n          totalHits: totalHits,\n          imgLength: imgLength,\n        });\n  };\n\n  onLoadMore = () => {\n    console.log('кликнули на onLoadMore');\n    this.setState(prev => ({\n      page: prev.page + 1,\n    }));\n  };\n  onLoading = () => {\n    this.setState({ loading: !this.state.loading });\n  };\n  onError = () => {\n    this.setState({});\n  };\n\n  render() {\n    return (\n      <div className=\"section\">\n        <SearchBar onSubmit={this.onSearchSubmit} />\n        {this.state.loading && (\n          <Loader\n            type=\"Bars\"\n            className=\"spinner\"\n            color=\"#00BFFF\"\n            height={50}\n            width={50}\n          />\n        )}\n        <ImageGallery\n          querry={this.state.querry}\n          page={this.state.page}\n          totalHits={this.totalHits}\n          onClick={this.onImageClick}\n          loading={this.onLoading}\n        />\n\n        {\n          (this.state.totalHits > 12,\n          this.state.totalHits > this.state.imgLength && (\n            <Button onLoadMore={this.onLoadMore} />\n          ))\n        }\n        {this.state.showModal && (\n          <Modal onToggleModal={this.toggleModal}>\n            <img src={this.state.largeImg} alt={this.state.querry} />\n            <button\n              className=\"closeBtn\"\n              type=\"button\"\n              onClick={this.toggleModal}\n            >\n              X\n            </button>\n          </Modal>\n        )}\n        <ToastContainer position=\"top-center\" autoClose={1000} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}